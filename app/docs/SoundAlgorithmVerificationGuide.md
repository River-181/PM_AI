## 사운드 알고리즘 및 모델 사용성 검증 가이드

현재 AI 모델의 예측 정확도와 신뢰도 임계값의 적절성을 검증하기 위한 단계별 가이드입니다.

### 1. 수동 테스트 및 결과 기록

1.  **앱 실행:** Xcode에서 앱을 실행합니다.
2.  **소리 생성:** 각 `SoundLabel`에 해당하는 실제 소리(예: "개 짖는 소리", "화재 경보", "노크 소리")를 앱이 실행 중인 기기 근처에서 발생시킵니다. 녹음된 파일을 재생하거나 직접 소리를 내는 방식으로 진행할 수 있습니다.
3.  **결과 관찰:** 앱 화면에 표시되는 `현재 라벨 (currentLabel)`과 `신뢰도 (currentConfidence)` 값을 주의 깊게 관찰합니다.
4.  **결과 기록:** 다음 형식으로 테스트 결과를 기록합니다. 이 기록은 어떤 라벨의 민감도를 조정해야 할지 판단하는 데 중요한 자료가 됩니다.

    ```
    [테스트 소리 라벨] -> [앱이 예측한 라벨] / [신뢰도]%
    예시:
    "개 짖는 소리" -> "개 짖는 소리" / 95% (정확)
    "개 짖는 소리" -> "소음_가구" / 70% (오탐지)
    "노크 소리" -> "알 수 없음" / 30% (미탐지)
    ```

    특히, 오탐지(잘못된 라벨로 분류)되거나 미탐지(아무것도 분류하지 못함)되는 경우를 중점적으로 기록합니다.

### 2. 민감도(신뢰도 임계값) 튜닝

`RecordingSample/sound_color_ai_app.swift` 파일 내의 `SoundClassifier` 클래스에 있는 `loadSettings()` 함수에서 각 소리 라벨의 기본 신뢰도 임계값을 조정할 수 있습니다.

1.  **파일 열기:** `RecordingSample/sound_color_ai_app.swift` 파일을 엽니다.
2.  **`loadSettings()` 함수 찾기:** 파일 내에서 `private func loadSettings()` 함수를 찾습니다.
3.  **임계값 조정:** `else` 블록 안에 있는 `self.confidenceThresholds` 딕셔너리에서 각 `SoundLabel`에 해당하는 `Double` 값을 수정합니다.

    *   **오탐지가 잦은 경우:** 해당 라벨의 임계값을 **높여서** 모델이 더 확신할 때만 분류하도록 합니다. (예: 0.70 -> 0.85)
    *   **미탐지가 잦은 경우:** 해당 라벨의 임계값을 **낮춰서** 모델이 조금 덜 확신하더라도 분류하도록 합니다. (예: 0.70 -> 0.55)

    ```swift
    // RecordingSample/sound_color_ai_app.swift 내 loadSettings() 함수 일부
    else {
        // 민감도 기본값 설정
        self.confidenceThresholds = [
            SoundLabel.fire.rawValue: 0.70, // 예시: 화재 경보 임계값
            SoundLabel.fall.rawValue: 0.70, // 예시: 낙상 감지 임계값
            // ... 다른 라벨들 ...
        ]
    }
    ```
    **참고:** `SoundLabel.silence.rawValue`와 같이 배경 소음이나 정적에 대한 임계값도 조정할 수 있습니다. `insignificantThreshold` (현재 0.75)는 `background`, `silence`, `conversation`에 공통으로 적용되는 임계값이므로, 이 값도 함께 고려하여 조정해야 합니다.

### 3. 반복 및 최적화

*   임계값을 조정한 후에는 1단계의 수동 테스트를 다시 수행하여 변경 사항이 원하는 결과로 이어지는지 확인합니다.
*   이 과정은 만족스러운 성능을 얻을 때까지 반복될 수 있습니다.

이 가이드를 통해 모델의 성능을 최적화하고, 실제 사용 환경에서 더 정확하고 안정적인 소리 분류를 달성할 수 있습니다.
